<!DOCTYPE html>
<html>
<head>
  <title>Student Management System</title>
</head>
<body>
  <h1>Welcome to the Student Management System</h1>

  Enter Student Name: <input type="text" id="name"><br><br>
  Enter Student Roll: <input type="text" id="roll"><br><br>
  Enter Student Class: <input type="text" id="class"><br><br>
  Enter Student CGPA: <input type="text" id="cgpa"><br><br>

  <input type="button" value="Insert" id="b1">
  <input type="button" value="Delete" id="b2">
  <input type="button" value="Update" id="b3">
  <input type="button" value="View" id="b4">

  <h2 id="result"></h2>

  <script type="module">
    // Import the functions you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-analytics.js";
    import {
      getDatabase,
      ref,
      set,
      update,
      remove,
      get,
      child
    } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

    // Your Firebase configuration
   // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCAxOg3R1hylJt94s0eUEQObWyR8Krdxdxx0L-jQ",
  authDomain: "practice-124b9.firebaseapp.com",
  projectId: "practice-124b9",
  storageBucket: "practice-124b9.firebasestorage.app",
  messagingSenderId: "677dssdss181754965",
  appId: "1:6771817dsdssd54965:web:ba6e48b1ee7e8595d6cedc",
  measurementId: "G-ETV9ssd83FKX6"
};

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getDatabase(app);

    // Button listeners
    document.getElementById('b1').addEventListener('click', insertData);
    document.getElementById('b2').addEventListener('click', deleteData);
    document.getElementById('b3').addEventListener('click', updateData);
    document.getElementById('b4').addEventListener('click', viewData);

    // Insert Data
    function insertData() {
      const name = document.getElementById('name').value;
      const roll = document.getElementById('roll').value;
      const sclass = document.getElementById('class').value;
      const cgpa = document.getElementById('cgpa').value;

      if (!roll) {
        alert("Please enter Roll Number");
        return;
      }

      set(ref(db, 'students/' + roll), {
        name: name,
        roll: roll,
        class: sclass,
        cgpa: cgpa
      }).then(() => {
        alert("Data Inserted Successfully");
      }).catch((error) => {
        alert("Error: " + error);
      });
    }

    // Delete Data
    function deleteData() {
      const roll = document.getElementById('roll').value;

      if (!roll) {
        alert("Please enter roll number");
        return;
      }

      remove(ref(db, 'students/' + roll))
        .then(() => alert("Data Deleted Successfully"))
        .catch((error) => alert("Error: " + error));
    }

    // Update Data
    function updateData() {
      const name = document.getElementById('name').value;
      const roll = document.getElementById('roll').value;
      const sclass = document.getElementById('class').value;
      const cgpa = document.getElementById('cgpa').value;

      if (!roll) {
        alert("Please enter Roll Number");
        return;
      }

      update(ref(db, 'students/' + roll), {
        name: name,
        class: sclass,
        cgpa: cgpa
      }).then(() => {
        alert("Data Updated Successfully");
      }).catch((error) => {
        alert("Error: " + error);
      });
    }

    // View Data
    function viewData() {
      const roll = document.getElementById('roll').value;

      if (!roll) {
        alert("Please enter roll number");
        return;
      }

      get(child(ref(db), 'students/' + roll))
        .then((record) => {
          if (record.exists()) {
            const data = record.val();
            document.getElementById('result').innerHTML =
              `<strong>Name:</strong> ${data.name}<br>` +
              `<strong>Roll:</strong> ${data.roll}<br>` +
              `<strong>Class:</strong> ${data.class}<br>` +
              `<strong>CGPA:</strong> ${data.cgpa}`;
          } else {
            alert("No data found for this roll number");
          }
        })
        .catch((error) => alert("Error: " + error));
    }
  </script>
</body>
</html>
